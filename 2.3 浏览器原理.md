# 浏览器原理

## 浏览器构造

- 用户界面- 包括地址栏、前进/后退按钮、书签菜单等。
- 浏览器引擎 - 在用户界面和呈现引擎之前传送指令
- 渲染引擎 - 负责显示请求内容。
- 网路 - 用户网络调试，比如 HTTP 请求
- 用户界面后端 - 用于绘制基本的窗口小部件，比如组合框和窗口
- JavaScript 解释器。用于解析和执行JavaScript代码
- 数据储存



## 浏览器引擎工作流程

- 呈现引擎开始解析 HTML文档 ，并将各标记逐个转换成“内容树上的DOM节点。同时会解析外部CSS文件及样式元素中的样式数据。HTML中这些带有视觉指令的样式信息用于创建另一个树结构：呈现树。
- 呈现树包含多个带有视觉属性（如颜色和尺寸）的矩形。这些矩形的排列顺序就是它们将在屏幕上显示的顺序。
- 呈现树构建完毕之后，进入“布局”处理阶段也就是为每个节点分配一个应出现在屏幕上的确切坐标。下一个阶段是绘制 - 呈现引擎引擎会遍历呈现树，由用户界面后端层将每个节点绘制出来。
- 需要着重指出的是，这是一个渐进的过程。为达到更好的用户体验，呈现引擎会力求尽快将内容显示在屏幕上。它不必等到整个HTML文旦解析完毕之后，就会开始构建呈现树和设置布局。在不断接收和处理来自网络的其余内容的同时，呈现引擎会将部分内容解析并显示出来。